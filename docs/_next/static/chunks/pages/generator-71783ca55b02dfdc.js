(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[57],{2329:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/generator",function(){return n(6695)}])},6236:function(e,t,n){"use strict";n.d(t,{P:function(){return a}});let a=e=>{let t=null==e?void 0:e.trim();return"".concat(t?"".concat(t,"님,\n"):"").concat("2025학년도 상명대학교 디자인대학 커뮤니케이션디자인전공 졸업전시회에 초대합니다!\n\n2025.11.14(금)-11.18(화)\n더 서울라이티움 제1전시장\n금요일 17:00 - 19:00\n토-화요일 11:00 - 19:00")}},7557:function(e,t,n){"use strict";n.r(t);var a=n(5893),i=n(7294),r=n(6236);t.default=e=>{let{from:t,to:n,canvasRef:l,onReset:s}=e,[o,c]=(0,i.useState)(!1),d=(0,i.useRef)(null),u=async()=>{let e=l.current;if(!e)return;c(!0);let a=t.trim(),i=n.trim(),s="invitation-from-".concat(encodeURIComponent(a||"unknown"),"-to-").concat(encodeURIComponent(i||"guest"),".png");try{let t,n=null,l=null;if(e.toBlob&&(n=await new Promise(t=>e.toBlob(t,"image/png"))),!n){let t=e.toDataURL("image/png");l=t;let a=t.indexOf(","),i=a>-1?t.slice(5,t.indexOf(";")):"image/png",r=atob(a>-1?t.slice(a+1):t),s=new ArrayBuffer(r.length),o=new Uint8Array(s);for(let e=0;e<r.length;e+=1)o[e]=r.charCodeAt(e);n=new Blob([o],{type:i})}if(!n)throw Error("초대장 이미지를 생성하지 못했습니다.");let c="undefined"!=typeof navigator?navigator:void 0,u="undefined"!=typeof navigator?navigator.userAgent:"",h=/iP(ad|hone|od)/i.test(u),m=/Android/i.test(u),f=(0,r.P)(i),g={title:a?"".concat(a,"의 초대장"):"초대장",text:f};if("undefined"!=typeof File)try{g.files=[new File([n],s,{type:"image/png"})]}catch(e){}let x=!!(null==c?void 0:c.share),p=(()=>{var e;if(!x||!c||!(null===(e=g.files)||void 0===e?void 0:e.length))return!1;if("function"!=typeof c.canShare)return!0;try{return c.canShare({files:g.files})}catch(e){return!1}})(),v=async e=>{if(!(null==c?void 0:c.share))return!1;try{return await c.share(e),!0}catch(e){return console.warn("초대장 공유에 실패했습니다.",e),!1}},w=!1;if(x&&(h||m)&&(null==c?void 0:c.share)&&(g.files&&p&&(w=await v(g)),!w)){var o;let e={title:g.title,text:null!==(o=g.text)&&void 0!==o?o:(0,r.P)()};w=await v(e)}let j=l;if(!j){let e=URL.createObjectURL(n);j=e,t=()=>URL.revokeObjectURL(e)}if(w){null==t||t();return}((e,t)=>{let n=d.current,a=null!=n?n:document.createElement("a"),i=!n;a.href=e,a.download=s,i&&(a.style.display="none",document.body.appendChild(a)),a.click(),window.requestAnimationFrame(()=>{a.removeAttribute("href"),a.removeAttribute("download"),null==t||t(),i&&a.remove()})})(j,t)}catch(e){console.error(e),window.alert("초대장을 저장하지 못했습니다. 다시 시도해 주세요.")}finally{c(!1)}};return(0,a.jsxs)("div",{className:"download-actions",children:[(0,a.jsx)("button",{className:"btn btn-save".concat(o?" btn-disabled":""),type:"button",disabled:o,onClick:u,children:o?"저장 중...":"저장하기"}),(0,a.jsx)("button",{className:"btn btn-retry",type:"button",onClick:()=>{c(!1),s()},children:"다시하기"}),(0,a.jsx)("a",{ref:d,style:{display:"none"}})]})}},1943:function(e,t,n){"use strict";n.r(t);var a=n(5893),i=n(7294),r=n(1163);let l='"rixdongnimgothic-pro","tk-rixdongnimgothic-pro",sans-serif',s={weight:700,minSize:48,maxSize:900,targetWidthRatio:.92,manualSize:0,xOffset:-110,yOffset:0},o={weight:700,minSize:48,maxSize:820,targetWidthRatio:.92,manualSize:0,xOffset:145,yOffset:0};t.default=e=>{let{from:t,to:n,canvasRef:c,className:d,imageSrc:u="/invitation_2.svg",fontOptions:h}=e,{basePath:m}=(0,r.useRouter)(),f=(0,i.useCallback)(e=>{let t=e.startsWith("/")?e:"/".concat(e);return"".concat(null!=m?m:"").concat(t)},[m]),g=(0,i.useMemo)(()=>({to:{...s,...null==h?void 0:h.to},from:{...o,...null==h?void 0:h.from}}),[h]),[x,p]=(0,i.useState)(!1),[v,w]=(0,i.useState)(null),[j,b]=(0,i.useState)(null);return(0,i.useEffect)(()=>{let e=!0;p(!1),w(null);let t=new Image;return t.crossOrigin="anonymous",t.onload=()=>{e&&(b(t),w(null))},t.onerror=()=>{e&&(b(null),p(!1),w("초대장 이미지를 불러오지 못했습니다."))},(async()=>{var e;if(document.fonts&&"ready"in document.fonts)try{await document.fonts.ready}catch(e){}if(null===(e=document.fonts)||void 0===e?void 0:e.load)try{let e=Array.from(new Set([g.to.weight,g.from.weight]));await Promise.all(e.flatMap(e=>[document.fonts.load("".concat(e," ").concat(36,"px rixdongnimgothic-pro")),document.fonts.load("".concat(e," ").concat(36,"px 'rixdongnimgothic-pro'")),document.fonts.load("".concat(e," ").concat(36,"px 'tk-rixdongnimgothic-pro'"))]))}catch(e){}})().finally(()=>{t.src=f(u)}),()=>{e=!1}},[f,u,g]),(0,i.useEffect)(()=>{let e=c.current,a=null==e?void 0:e.getContext("2d");if(!e||!a||!j)return;let i=()=>{let i=(t,n,i,r)=>{var s,o;let c=t.trim();if(!c)return;let d=(null!==(s=r.yOffset)&&void 0!==s?s:0)*(e.height/1098),u=Math.round(e.height*n+d),h=Math.min(.98*e.width,e.width*r.targetWidthRatio),m=(e,t)=>{a.font="".concat(t," ").concat(e,"px ").concat(l);let n=a.measureText(c);return n.actualBoundingBoxRight-n.actualBoundingBoxLeft||n.width},f=r.manualSize>0?Math.max(r.minSize,Math.min(r.maxSize,Math.round(r.manualSize*(e.width/1024)))):r.minSize;if(r.manualSize<=0){let e=r.minSize,t=Math.max(r.minSize,r.maxSize),n=r.minSize;for(;e<=t;){let a=Math.floor((e+t)/2);m(a,r.weight)<=h?(n=a,e=a+2):t=a-2}f=Math.min(n,r.maxSize)}a.font="".concat(r.weight," ").concat(f,"px ").concat(l),a.textAlign="center",a.textBaseline="middle",a.fillStyle="#121212";let g=null!==(o=r.xOffset)&&void 0!==o?o:i,x=Math.round(e.width/768*g),p=e.width/2+x;a.fillText(c,p,u)};a.imageSmoothingEnabled=!0,void 0!==a.imageSmoothingQuality&&(a.imageSmoothingQuality="high"),a.drawImage(j,0,0,e.width,e.height),i(n,.11566484517304189,0,g.to),i(t,.5591985428051002,0,g.from)},r=null,s=()=>{let t=e.getBoundingClientRect(),n=Math.max(1,window.devicePixelRatio||1),r=t.width||j.width,l=Math.max(768,Math.min(j.naturalWidth&&Number.isFinite(j.naturalWidth)?Math.max(768,Math.min(3072,j.naturalWidth)):3072,Math.round(r*n*3)||768)),s=Math.max(1,Math.round(l*(j.naturalHeight&&j.naturalWidth?j.naturalHeight/j.naturalWidth:1.4296875)));(e.width!==l||e.height!==s)&&(e.width=l,e.height=s);let o=t.width||l/n,c=s/l*o;e.style.width="".concat(o,"px"),e.style.height="".concat(c,"px"),a.clearRect(0,0,e.width,e.height),i(),p(!0),w(null)};s();let o="undefined"!=typeof ResizeObserver?new ResizeObserver(()=>{r&&cancelAnimationFrame(r),r=window.requestAnimationFrame(s)}):null;null==o||o.observe(e);let d=()=>{r&&cancelAnimationFrame(r),r=window.requestAnimationFrame(s)};return window.addEventListener("resize",d),()=>{null==o||o.disconnect(),r&&cancelAnimationFrame(r),window.removeEventListener("resize",d)}},[c,t,n,j,g]),(0,a.jsxs)("div",{className:"invitation-wrapper",children:[!x&&(0,a.jsx)("div",{className:"canvas-status",children:null!=v?v:"초대장 이미지를 불러오는 중입니다..."}),(0,a.jsx)("canvas",{ref:c,className:null!=d?d:"invitation-canvas"})]})}},6695:function(e,t,n){"use strict";n.r(t);var a=n(5893),i=n(7294),r=n(1943),l=n(7557);t.default=()=>{let[e,t]=(0,i.useState)(""),[n,s]=(0,i.useState)(""),[o,c]=(0,i.useState)(!1),d=(0,i.useRef)(null),u=(0,i.useMemo)(()=>({to:{weight:400,manualSize:1200},from:{weight:400,manualSize:1200}}),[]),h=(0,i.useMemo)(()=>e.trim().length>0&&n.trim().length>0,[e,n]);return(0,a.jsx)("main",{className:"generator",children:(0,a.jsxs)("div",{className:"generator-shell",children:[(0,a.jsxs)("div",{className:"generator-confetti",children:[(0,a.jsx)("span",{className:"mint"}),(0,a.jsx)("span",{className:"sun"}),(0,a.jsx)("span",{className:"sky"})]}),(0,a.jsxs)("div",{className:"generator-body",children:[(0,a.jsxs)("header",{className:"generator-header",children:[(0,a.jsx)("p",{children:"상명대학교 디자인대학"}),(0,a.jsxs)("h1",{children:["커뮤니케이션디자인전공",(0,a.jsx)("br",{}),"제38회 졸업전시회"]}),(0,a.jsx)("span",{children:"[ Invitation Card ]"})]}),!o&&(0,a.jsxs)("form",{className:"generator-form",onSubmit:e=>{e.preventDefault(),h&&c(!0)},children:[(0,a.jsxs)("div",{className:"generator-fields",children:[(0,a.jsxs)("label",{className:"generator-field",children:[(0,a.jsx)("span",{className:"generator-field-label",children:"초대장을 받는 분"}),(0,a.jsxs)("div",{className:"generator-field-content",children:[(0,a.jsx)("span",{className:"generator-field-title",children:"To."}),(0,a.jsx)("input",{className:"generator-input",maxLength:20,placeholder:"(입력하세요)",value:n,onChange:e=>s(e.target.value)})]})]}),(0,a.jsxs)("label",{className:"generator-field",children:[(0,a.jsx)("span",{className:"generator-field-label",children:"초대장을 보내는 분"}),(0,a.jsxs)("div",{className:"generator-field-content",children:[(0,a.jsx)("span",{className:"generator-field-title",children:"From."}),(0,a.jsx)("input",{className:"generator-input",maxLength:20,placeholder:"(입력하세요)",value:e,onChange:e=>t(e.target.value)})]})]})]}),(0,a.jsxs)("button",{className:"btn btn-primary btn-create".concat(h?"":" btn-disabled"),type:"submit",disabled:!h,children:["초대장 만들기 ",(0,a.jsx)("span",{className:"arrow",children:"➜"})]})]}),o&&(0,a.jsxs)("section",{className:"generator-preview",children:[(0,a.jsxs)("article",{className:"preview-card",children:[(0,a.jsxs)("div",{className:"preview-text",children:[(0,a.jsx)("p",{className:"preview-label",children:"To."}),(0,a.jsx)("p",{children:"2025학년도 상명대학교 디자인대학 커뮤니케이션디자인전공 졸업전시회에 초대합니다."})]}),(0,a.jsx)(r.default,{from:e,to:n,canvasRef:d,className:"preview-canvas",fontOptions:u,imageSrc:"/invitation_2.png"}),(0,a.jsxs)("div",{className:"preview-details",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"From."})," ",e]}),(0,a.jsx)("p",{children:(0,a.jsx)("strong",{children:"2025.11.14(fri) - 11.18(tue)"})}),(0,a.jsx)("p",{children:"더 서울라이티움 제1전시장"}),(0,a.jsx)("p",{children:"Opening | 11.14 17:00"}),(0,a.jsx)("p",{children:"관람시간 | 평일 17:00 - 19:00, 토\xb7일 11:00 - 19:00"})]})]}),(0,a.jsx)(l.default,{from:e,to:n,canvasRef:d,onReset:()=>{t(""),s(""),c(!1);let e=d.current,n=null==e?void 0:e.getContext("2d");e&&n&&n.clearRect(0,0,e.width,e.height)}})]})]}),(0,a.jsxs)("footer",{className:"generator-footer",children:[(0,a.jsx)("p",{children:"@smucd2025"}),(0,a.jsx)("p",{children:"smucd2025.com"})]})]})})}},1163:function(e,t,n){e.exports=n(3079)}},function(e){e.O(0,[888,774,179],function(){return e(e.s=2329)}),_N_E=e.O()}]);